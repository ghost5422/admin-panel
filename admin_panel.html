<script>
  let lastOrderKey = null;

  db.ref("orders").limitToLast(1).on("child_added", (snapshot) => {
    const orderKey = snapshot.key;
    if (orderKey !== lastOrderKey) {
      lastOrderKey = orderKey;

      // Ses Ã§al
      const sound = document.getElementById("notification-sound");
      if (sound) sound.play();

      // Popup gÃ¶ster
      const data = snapshot.val();
      const total = data.items.reduce((a, b) => a + b.price * b.quantity, 0);

      Swal.fire({
        title: "ðŸ”” Yeni SipariÅŸ!",
        text: `${data.name} - â‚º${total}`,
        icon: "info",
        confirmButtonText: "Tamam"
      });
    }
  });
</script>
